\chapter{多视角人脸重建实验平台}
\label{chap:platform}

\section{总体目标}

输入多个相机在（几乎）同一时刻拍摄的肖像照片。相机的参数和环境光照可以提前标定。本文的目标是静态模型重建，因此无须考虑采集连续动态图像的问题。通过以很小的间隔（数毫秒）触发多盏闪光灯，也能在单次采集中获得不同照明条件的数据。

输出被拍摄对象尽可能精确的3D模型，并能支持任意视角，任意光照条件下重新渲染。

本文的贡献主要在于采集系统的搭建方案，以及结合我们特定情况的算法复现和改进。

\section{相机固定}

铝型材支架设计

\section{被动相机同步}
\label{sec:passive_sync}

该装置无须独立供电。它能以很高的精度同时触发多台相机的对焦和快门，从而实现人脸多视角数据的捕获。

\paragraph{相机快门触发原理}

\paragraph{被动同步装置设计}

\paragraph{同步精度测试}

\input{calib}

\section{基于反射球的光源标定和HDRI合成}

\section{主动相机/闪光灯同步}

主动相机同步装置有单片机等实时控制系统控制，能独立控制每台相机、闪光灯触发延迟，最多24个通道。可用于快速抓拍不同闪光灯照明下的照片

\paragraph{主动同步装置硬件设计}

\paragraph{主动同步装置软件设计}

\paragraph{滚动快门原理}

\paragraph{闪光灯触发延迟快速标定方法}

\section{照片拍摄和整理流程}

\paragraph{同步装置连接与设定}

\paragraph{拍摄采集对象}

\paragraph{相机、光源标定数据采集}

\paragraph{照片拷贝和整理}

\section{初步验证}

作为该实验平台实用性的初步验证，本文利用该平台采集的数据使用传统的计算机视觉方法尝试重建人脸模型。

本文首先使用Colmap完成人脸的稀疏以及稠密点云重建。\TODO{参数调整}

然后，本文使用FlameFitting工具，将FLAME 3D模型配准到稠密点云上，得到初步的人脸几何形状。

然而，该配准的效果并不理想。因此本文使用Blender同时导入点云和几何形状，并手动调整模型顶点位置以完成更精确的配准。

最后，本文通过Unwrap方法，将照片映射到UV空间，每个视角获得一张纹理贴图，再将这些纹理贴图通过以下方式进行融合，最终获得一个带纹理的3D人脸模型。

\TODO{融合方式公式}

\TODO{结果图}

\section{后续工作}

然而，这种方法仅仅是对该平台采集的数据的初步利用，仅发挥了该平台的一小部分价值。
该平台的设计目标是用于运行可微分渲染算法，后续的研究者们将能利用该平台开展诸多基于可微分渲染的研究，例如：
\begin{itemize}
\item 在传统计算机视觉重建的几何形状的基础上，利用可微分渲染算法，实现符合基于物理的渲染(PBR)流程的人脸材质，包括粗糙度、次表面散射等参数。
\item 利用所采集到的HDRI光源信息，基于分离求和近似(split sum approximation)的可微分光栅化渲染算法，直接端到端地同时估计人脸的几何结构和材质。
\item 利用光线追踪方法，进一步考虑全局光照，以估计更加准确的材质。
\item 将本系统所使用的消费级微单相机更换为工业相机，以实现视频帧同步，可将该实验平台扩展为采集人脸动态表情数据。
\end{itemize}
